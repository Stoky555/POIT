<!DOCTYPE HTML>
<html>
   <head>
      <title>Flask-SocketIO Test</title>
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.5/socket.io.min.js"></script>
      <link rel="stylesheet" href="static/libs/jquery-ui.min.css">
      <script src="static/libs/plotly-latest.min.js"></script>
      <script src="static/libs/jquery-3.2.1.min.js"></script>
      <script src="static/libs/jquery-ui.min.js"></script>
      <script src="static/libs/gauge.min.js"></script>
      <script type="text/javascript" charset="utf-8">
         $( function() {
           $( "#tabs" ).tabs({
             event: "mouseover"
           });
         });
         $(document).ready(function() {
          namespace = '/test';
          var socket = io.connect(location.protocol + '//' + document.domain + ':' + location.port + namespace);
         
          socket.on('connect', function() {
            socket.emit('my_event', {data: 'I\'m connected!', value: 1}); });
         
          socket.on('my_response', function(msg) {
            console.log(msg.data);
            $('#log').append('Received #'+msg.count+': '+msg.data+'<br>').html(); });
         
          $('form#emit').submit(function(event) {
              socket.emit('my_event', {value: $('#emit_value').val()});
              return false; });
          $('#buttonVal').click(function(event) {
              //console.log($('#buttonVal').val());
              socket.emit('db_event', {value: $('#buttonVal').val()});
              if ($(this).val() == "start") {
                $(this).val("stop");
                $(this).text("Stop");
              }
              else {
                $(this).val("start");
                $(this).text("Start");
              }
              return false; }); 
          $('form#disconnect').submit(function(event) {
              socket.emit('disconnect_request');
              return false; });         
          });
      </script>
   </head>
   <body>
      <h1>Flask-SocketIO Test</h1>
      <h2>Send:</h2>
      <form id="emit" method="POST" action='#'>
         <input type="text" name="emit_value" id="emit_value" placeholder="Amplituda">
         <input type="submit" value="SEND TO ARDUINO">
      </form>
      <button id="buttonVal" type="submit" value="start">Start</button>
      <form id="disconnect" method="POST" action="#">
         <input type="submit" value="Disconnect">
      </form>
      <div id="tabs">
         <ul>
            <li><a href="#tabs-1">LOG</a></li>
            <li><a href="#tabs-2"></a></li>
            <li><a href="#tabs-3"></a></li>
         </ul>
         <div id="tabs-1">
            <h2>Receive:</h2>
            <div id="log"></div>
         </div>
         <div id="tabs-2">

         </div>
         <div id="tabs-3">
      
         </div>
      </div>
   </body>
</html>
